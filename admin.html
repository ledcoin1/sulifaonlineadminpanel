<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <style>
    body { font-family: Arial; padding: 20px }
    input { margin: 5px }
    button { margin: 5px }
    table { border-collapse: collapse; margin-top: 20px }
    td, th { border: 1px solid #ccc; padding: 6px }
  </style>
</head>
<body>

<h2>ðŸ›  Admin Panel</h2>

<label>ADMIN KEY:</label>
<input id="key" placeholder="ADMIN_KEY" />

<button onclick="loadUsers()">Load users</button>

<table>
  <thead>
    <tr>
      <th>User ID</th>
      <th>Balance</th>
      <th>Add</th>
    </tr>
  </thead>
  <tbody id="users"></tbody>
</table>

<script>
const API = "https://sulifaonlinerender.onrender.com";

async function loadUsers() {
  const key = document.getElementById("key").value;

  const res = await fetch(`${API}/admin/users?key=${key}`);
  const data = await res.json();

  const tbody = document.getElementById("users");
  tbody.innerHTML = "";

  data.forEach(u => {
    tbody.innerHTML += `
      <tr>
        <td>${u.userId}</td>
        <td>${u.balance}</td>
        <td>
          <input type="number" id="amt-${u.userId}" value="100" />
          <button onclick="addBalance('${u.userId}')">+</button>
        </td>
      </tr>
    `;
  });
}

async function addBalance(userId) {
  const key = document.getElementById("key").value;
  const amount = document.getElementById("amt-" + userId).value;

  await fetch(`${API}/admin/add-balance?key=${key}`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ userId, amount })
  });

  loadUsers();
}
</script>

</body>
</html>
