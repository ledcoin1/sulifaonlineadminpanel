<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Сулифа – Админ Панель</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: auto; }
  h2 { text-align: center; }
  input, button { width: 100%; padding: 10px; margin: 8px 0; }
  #message { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>
<h2>Админ панель – Баланс жаңарту</h2>

<label>Telegram ID:</label>
<input type="text" id="telegramId" placeholder="Telegram ID">

<label>Жаңа баланс:</label>
<input type="number" id="newBalance" placeholder="Жаңа баланс">

<button onclick="updateBalance()">Жаңарту</button>

<p id="message"></p>

<script>
  // Render-дегі backend URL
  const backendURL = "https://sulifaonlinerender.onrender.com";

  // Админ кілт (Render .env ішіндегі ADMIN_KEY-ке сәйкес)
  const adminKey = "YOUR_ADMIN_KEY";

  async function updateBalance() {
    const telegramId = document.getElementById("telegramId").value.trim();
    const newBalance = Number(document.getElementById("newBalance").value);

    if (!telegramId || isNaN(newBalance)) {
      alert("Telegram ID мен жаңа баланс дұрыс енгізілгенін тексеріңіз!");
      return;
    }

    try {
      const res = await fetch(`${backendURL}/api/admin/update-balance`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ telegramId, newBalance, adminKey })
      });

      const data = await res.json();

      if (res.ok) {
        document.getElementById("message").innerText = `Баланс жаңартылды: ${data.balance}`;
      } else {
        document.getElementById("message").innerText = `Қате: ${data.error}`;
      }
    } catch (err) {
      document.getElementById("message").innerText = "Серверге қосылу мүмкін емес!";
      console.error(err);
    }
  }
</script>
</body>
</html>
